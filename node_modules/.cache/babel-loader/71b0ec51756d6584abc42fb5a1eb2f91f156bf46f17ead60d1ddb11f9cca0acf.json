{"ast":null,"code":"import React,{useState,useEffect,useCallback,useMemo,useRef}from'react';import{createPortal}from'react-dom';import axios from'axios';import BoxLoader from\"./looader/BoxLoader\";import{Import}from'lucide-react';// Base URL: replace with your actual API domain\nimport BASE_URL from'../config';// Axios instance factory (adds bearer token)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getToken=()=>localStorage.getItem(\"lalitkumar_choudhary\")||\"\";const axiosInstance=axios.create({baseURL:BASE_URL,headers:{'Content-Type':'application/json'}});// Request helper with simple retry logic\nconst requestWithRetry=async function(config){let retries=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;let backoff=arguments.length>2&&arguments[2]!==undefined?arguments[2]:500;try{const token=getToken();if(!config.headers)config.headers={};config.headers.Authorization=`Bearer ${token}`;return await axiosInstance.request(config);}catch(err){if(retries>0){await new Promise(r=>setTimeout(r,backoff));return requestWithRetry(config,retries-1,backoff*2);}throw err;}};// API functions\nconst api={fetchSuggestions:async query=>{try{const response=await requestWithRetry({method:'GET',url:`/admin/medicines/recommendation`,params:{query}});// expecting response.data.recommendations[]\nreturn{status:'success',recommendations:response.data.recommendations||[]};}catch(error){console.error(\"Error fetching suggestions:\",error);return{status:'error',message:'Failed to fetch suggestions.',recommendations:[]};}},fetchMedicineDetails:async medicineId=>{try{const response=await requestWithRetry({method:'GET',url:`/admin/medicne_info/${medicineId}`});// assuming full medicine info in response.data (or array)\nreturn{status:'success',medicine:response.data};}catch(error){console.error(\"Error fetching medicine details:\",error);return{status:'error',message:'Failed to fetch medicine details.',medicine:null};}},generateBill:async billPayload=>{try{const response=await requestWithRetry({method:'POST',url:`/admin/sales`,data:billPayload});return{status:'success',message:response.data.message||'Bill generated successfully.'};}catch(error){var _error$response,_error$response$data;console.error(\"Error generating bill:\",error);const msg=(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to generate bill.';return{status:'error',message:msg};}}};// Debounce util\nconst debounce=(func,delay)=>{let timeout;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}clearTimeout(timeout);timeout=setTimeout(()=>func(...args),delay);};};const Modal=_ref=>{let{children,onClose}=_ref;return/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full max-w-md bg-white rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})}),children]})}),document.body);};const AlertModal=_ref2=>{let{message,onClose}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-red-100 bg-opacity-75 flex items-center justify-center p-4 z-50 rounded-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-red-600 mb-4\",children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\",children:\"OK\"})]})});};export default function Billing(){// Theme definitions for each bill\nconst billThemes=[{bg:'bg-purple-100',btnBg:'bg-purple-600',btnText:'text-purple-700',btnHoverBg:'hover:bg-purple-700',activeNav:'bg-purple-600 text-white',inactiveNavBg:'bg-purple-100',inactiveNavText:'text-purple-700'},{bg:'bg-green-100',btnBg:'bg-green-600',btnText:'text-green-700',btnHoverBg:'hover:bg-green-700',activeNav:'bg-green-600 text-white',inactiveNavBg:'bg-green-100',inactiveNavText:'text-green-700'},{bg:'bg-blue-100',btnBg:'bg-blue-600',btnText:'text-blue-700',btnHoverBg:'hover:bg-blue-700',activeNav:'bg-blue-600 text-white',inactiveNavBg:'bg-blue-100',inactiveNavText:'text-blue-700'}];// State\nconst[bills,setBills]=useState([{customerName:'',contactNumber:'',paymentMethod:'Cash',medicines:[]},{customerName:'',contactNumber:'',paymentMethod:'Cash',medicines:[]},{customerName:'',contactNumber:'',paymentMethod:'Cash',medicines:[]}]);const[activeBillIndex,setActiveBillIndex]=useState(0);const[showModal,setShowModal]=useState(false);const[modalForm,setModalForm]=useState({medicineName:'',purchasePrice:'',stockQuantity:'',quantity:1,sellPrice:'',medicineId:null,batchNo:''});const[suggestions,setSuggestions]=useState([]);const[suggestionLoading,setSuggestionLoading]=useState(false);const[selectedSuggestionIndex,setSelectedSuggestionIndex]=useState(-1);const[modalAlert,setModalAlert]=useState({show:false,message:''});const[isGeneratingBill,setIsGeneratingBill]=useState(false);const[billMessage,setBillMessage]=useState({show:false,message:'',type:''});const activeBill=bills[activeBillIndex];// Ref for autofocus\nconst medicineInputRef=useRef(null);// Handlers\nconst handleBillChange=index=>{setActiveBillIndex(index);};const handleCustomerChange=e=>{const{name,value}=e.target;const newBills=[...bills];newBills[activeBillIndex]={...newBills[activeBillIndex],[name]:value};setBills(newBills);};const handleModalFormChange=e=>{const{name,value}=e.target;setModalForm(prev=>({...prev,[name]:value}));};const handleOpenModal=()=>{setModalForm({medicineName:'',purchasePrice:'',stockQuantity:'',quantity:1,sellPrice:'',medicineId:null,batchNo:''});setSuggestions([]);setSelectedSuggestionIndex(-1);setModalAlert({show:false,message:''});setShowModal(true);};const handleCloseModal=()=>{setShowModal(false);setSuggestions([]);setSelectedSuggestionIndex(-1);setModalAlert({show:false,message:''});};// Auto-focus when modal opens\nuseEffect(()=>{if(showModal&&medicineInputRef.current){medicineInputRef.current.focus();}},[showModal]);// Debounced fetch\nconst debouncedFetchSuggestions=useCallback(debounce(async query=>{if(query.trim().length>1){setSuggestionLoading(true);try{const response=await api.fetchSuggestions(query);if(response.status===\"success\"){setSuggestions(response.recommendations||[]);}}catch(error){console.error(\"Error fetching suggestions:\",error);}finally{setSuggestionLoading(false);}}else{setSuggestions([]);}},300),[]);const handleMedicineNameChange=e=>{const value=e.target.value;setModalForm(prev=>({...prev,medicineName:value,medicineId:null,batchNo:''}));debouncedFetchSuggestions(value);setSelectedSuggestionIndex(-1);};const handleSuggestionSelect=useCallback(async suggestion=>{try{const response=await api.fetchMedicineDetails(suggestion.medicine_id);if(response.status===\"success\"&&response.medicine){console.log(response);const medicine=response.medicine.medicine[0];console.log(medicine);setModalForm({medicineName:`${medicine.medicine_name} (${medicine.batch_no})`,purchasePrice:medicine.purchase_price,stockQuantity:medicine.stock_quantity,quantity:1,sellPrice:medicine.mrp,medicineId:medicine.medicine_id,batchNo:medicine.batch_no});setSuggestions([]);setSelectedSuggestionIndex(-1);}else{setModalAlert({show:true,message:\"Could not load medicine details.\"});}}catch(error){console.error(\"Error fetching medicine details:\",error);setModalAlert({show:true,message:\"Failed to fetch medicine details.\"});}},[]);const handleKeyDown=e=>{if(suggestions.length===0)return;if(e.key==='ArrowDown'){e.preventDefault();setSelectedSuggestionIndex(prev=>(prev+1)%suggestions.length);}else if(e.key==='ArrowUp'){e.preventDefault();setSelectedSuggestionIndex(prev=>(prev-1+suggestions.length)%suggestions.length);}else if(e.key==='Enter'&&selectedSuggestionIndex!==-1){e.preventDefault();handleSuggestionSelect(suggestions[selectedSuggestionIndex]);}};const handleAddToBill=()=>{const{quantity,stockQuantity,sellPrice,purchasePrice,medicineName,medicineId,batchNo}=modalForm;if(parseFloat(sellPrice)<parseFloat(purchasePrice)){setModalAlert({show:true,message:\"Sell Price is less than Purchase Price!\"});return;}if(parseInt(quantity,10)>parseInt(stockQuantity,10)){setModalAlert({show:true,message:\"Quantity is more than available stock!\"});return;}if(!medicineId){setModalAlert({show:true,message:\"Please select a medicine from the suggestions.\"});return;}const newMedicine={medicine_id:medicineId,medicine_name:medicineName.split('(')[0].trim(),batch_no:batchNo,quantity:parseInt(quantity,10),price_per_unit:parseFloat(sellPrice),total:parseFloat(sellPrice)*parseInt(quantity,10)};const newBills=[...bills];newBills[activeBillIndex]={...newBills[activeBillIndex],medicines:[...newBills[activeBillIndex].medicines,newMedicine]};setBills(newBills);handleCloseModal();};const totalAmount=useMemo(()=>{return activeBill.medicines.reduce((acc,med)=>acc+med.total,0);},[activeBill.medicines]);const handleGenerateBill=async()=>{setIsGeneratingBill(true);const billPayload={customer_name:activeBill.customerName,contact_number:activeBill.contactNumber,employee_id:3,// Hardcoded per earlier\npayment_method:activeBill.paymentMethod,medicines:activeBill.medicines.map(med=>({medicine_id:med.medicine_id,quantity:med.quantity,rate:String(med.price_per_unit)}))};try{const response=await api.generateBill(billPayload);if(response.status===\"success\"){setBillMessage({show:true,message:response.message,type:'success'});// Reset current bill\nconst newBills=[...bills];newBills[activeBillIndex]={customerName:'',contactNumber:'',paymentMethod:'Cash',medicines:[]};setBills(newBills);}else{setBillMessage({show:true,message:response.message||\"Failed to generate bill.\",type:'error'});}}catch(error){console.error(\"Error generating bill:\",error);setBillMessage({show:true,message:\"Failed to generate bill.\",type:'error'});}finally{setIsGeneratingBill(false);setTimeout(()=>setBillMessage({show:false,message:'',type:''}),3000);}};return/*#__PURE__*/_jsxs(\"div\",{className:`min-h-screen bg-white text-gray-800 p-4 font-sans flex items-start justify-center`,children:[/*#__PURE__*/_jsxs(\"div\",{className:`w-full max-w-5xl ${billThemes[activeBillIndex].bg}  rounded-2xl shadow-xl p-6 lg:p-10 my-8`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>console.log('Go back'),className:`${billThemes[activeBillIndex].btnText} hover:opacity-80 transition-colors p-2`,children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M10 19l-7-7m0 0l7-7m-7 7h18\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:`text-2xl font-bold ${billThemes[activeBillIndex].btnText}`,children:\"Medicine Billing\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"customerName\",className:\"text-sm font-medium text-gray-600 mb-1\",children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"customerName\",name:\"customerName\",value:activeBill.customerName,onChange:handleCustomerChange,placeholder:\"Enter customer name\",className:\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"contactNumber\",className:\"text-sm font-medium text-gray-600 mb-1\",children:\"Contact No.\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"contactNumber\",name:\"contactNumber\",value:activeBill.contactNumber,onChange:handleCustomerChange,placeholder:\"Enter contact number\",className:\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"paymentMethod\",className:\"text-sm font-medium text-gray-600 mb-1\",children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"paymentMethod\",name:\"paymentMethod\",value:activeBill.paymentMethod,onChange:handleCustomerChange,className:\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Card\",children:\"Card\"}),/*#__PURE__*/_jsx(\"option\",{value:\"UPI\",children:\"UPI\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end mb-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleOpenModal,className:`${billThemes[activeBillIndex].btnBg} text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-colors ${billThemes[activeBillIndex].btnHoverBg}`,children:\"Add Medicine\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto rounded-xl shadow-inner mb-6\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-green-100 border-b-2 border-green-200\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left text-sm font-semibold text-gray-700\",children:\"Medicine\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left text-sm font-semibold text-gray-700\",children:\"Batch No.\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left text-sm font-semibold text-gray-700\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left text-sm font-semibold text-gray-700\",children:\"Price/Unit\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left text-sm font-semibold text-gray-700\",children:\"Total\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:activeBill.medicines.length>0?activeBill.medicines.map((med,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-gray-700\",children:med.medicine_name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-gray-700\",children:med.batch_no}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-gray-700\",children:med.quantity}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4 text-gray-700\",children:[\"\\u20B9\",med.price_per_unit.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4 text-gray-700\",children:[\"\\u20B9\",med.total.toFixed(2)]})]},index)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"py-10 text-center text-gray-500 italic\",children:\"No medicines added yet.\"})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold text-green-700\",children:\"Total Amount\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-green-700\",children:[\"\\u20B9\",totalAmount.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateBill,disabled:isGeneratingBill||activeBill.medicines.length===0,className:`${billThemes[activeBillIndex].btnBg} text-white font-semibold py-3 px-8 rounded-lg shadow-lg transition-colors ${billThemes[activeBillIndex].btnHoverBg} disabled:bg-gray-400 disabled:cursor-not-allowed`,children:isGeneratingBill?'Generating...':'Generate New Bill'})}),billMessage.show&&/*#__PURE__*/_jsx(\"div\",{className:`mt-4 p-4 rounded-lg font-semibold text-center transition-opacity duration-300 ${billMessage.type==='success'?'bg-green-500 text-white':'bg-red-500 text-white'}`,children:billMessage.message}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 flex justify-center space-x-4\",children:[1,2,3].map((billNumber,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleBillChange(index),className:`py-2 px-6 rounded-lg font-semibold transition-all duration-300\n                                ${activeBillIndex===index?`${billThemes[index].activeNav} shadow-md scale-105`:`${billThemes[index].inactiveNavBg} ${billThemes[index].inactiveNavText} hover:brightness-95 border border-gray-200`}`,children:[\"Bill \",billNumber]},index))})]}),showModal&&/*#__PURE__*/_jsx(Modal,{onClose:handleCloseModal,children:modalAlert.show?/*#__PURE__*/_jsx(AlertModal,{message:modalAlert.message,onClose:()=>setModalAlert({show:false,message:''})}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-2\",children:\"Add Medicine\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mb-6\",children:\"Enter the details of the medicine to add to the bill.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"medicineName\",className:\"text-sm font-medium text-gray-600\",children:\"Medicine Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"medicineName\",name:\"medicineName\",value:modalForm.medicineName,onChange:handleMedicineNameChange,onKeyDown:handleKeyDown,placeholder:\"Search medicine by name or batch no.\",ref:medicineInputRef,className:\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\",autoComplete:\"off\"}),(suggestionLoading||suggestions.length>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-full left-0 right-0 z-10 bg-white rounded-lg shadow-lg border border-gray-200 mt-1 max-h-60 overflow-y-auto\",children:[suggestionLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-center text-gray-500\",children:\"Loading...\"}),suggestions.length>0&&suggestions.map((suggestion,index)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleSuggestionSelect(suggestion),className:`cursor-pointer px-4 py-3 hover:bg-green-50 transition-colors\n                                                        ${index===selectedSuggestionIndex?'bg-green-100':''}`,children:[suggestion.medicine_name,\" (\",suggestion.batch_no,\")\"]},suggestion.medicine_id+suggestion.batch_no))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"purchasePrice\",className:\"text-sm font-medium text-gray-600\",children:\"Purchase Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"purchasePrice\",name:\"purchasePrice\",value:modalForm.purchasePrice,readOnly:true,className:\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 text-gray-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stockQuantity\",className:\"text-sm font-medium text-gray-600\",children:\"Stock Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"stockQuantity\",name:\"stockQuantity\",value:modalForm.stockQuantity,readOnly:true,className:\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 text-gray-600\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",className:\"text-sm font-medium text-gray-600\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantity\",name:\"quantity\",value:modalForm.quantity,onChange:handleModalFormChange,min:\"1\",className:\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sellPrice\",className:\"text-sm font-medium text-gray-600\",children:\"Sell Price (MRP)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"sellPrice\",name:\"sellPrice\",value:modalForm.sellPrice,onChange:handleModalFormChange,min:\"0\",className:\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToBill,className:\"w-full mt-8 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:bg-green-700 transition-colors disabled:bg-gray-400\",disabled:!modalForm.medicineId||!modalForm.quantity||!modalForm.sellPrice,children:\"Add to Bill\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useRef","createPortal","axios","BoxLoader","Import","BASE_URL","jsx","_jsx","jsxs","_jsxs","getToken","localStorage","getItem","axiosInstance","create","baseURL","headers","requestWithRetry","config","retries","arguments","length","undefined","backoff","token","Authorization","request","err","Promise","r","setTimeout","api","fetchSuggestions","query","response","method","url","params","status","recommendations","data","error","console","message","fetchMedicineDetails","medicineId","medicine","generateBill","billPayload","_error$response","_error$response$data","msg","debounce","func","delay","timeout","_len","args","Array","_key","clearTimeout","Modal","_ref","children","onClose","className","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","document","body","AlertModal","_ref2","Billing","billThemes","bg","btnBg","btnText","btnHoverBg","activeNav","inactiveNavBg","inactiveNavText","bills","setBills","customerName","contactNumber","paymentMethod","medicines","activeBillIndex","setActiveBillIndex","showModal","setShowModal","modalForm","setModalForm","medicineName","purchasePrice","stockQuantity","quantity","sellPrice","batchNo","suggestions","setSuggestions","suggestionLoading","setSuggestionLoading","selectedSuggestionIndex","setSelectedSuggestionIndex","modalAlert","setModalAlert","show","isGeneratingBill","setIsGeneratingBill","billMessage","setBillMessage","type","activeBill","medicineInputRef","handleBillChange","index","handleCustomerChange","e","name","value","target","newBills","handleModalFormChange","prev","handleOpenModal","handleCloseModal","current","focus","debouncedFetchSuggestions","trim","handleMedicineNameChange","handleSuggestionSelect","suggestion","medicine_id","log","medicine_name","batch_no","purchase_price","stock_quantity","mrp","handleKeyDown","key","preventDefault","handleAddToBill","parseFloat","parseInt","newMedicine","split","price_per_unit","total","totalAmount","reduce","acc","med","handleGenerateBill","customer_name","contact_number","employee_id","payment_method","map","rate","String","htmlFor","id","onChange","placeholder","toFixed","colSpan","disabled","billNumber","onKeyDown","ref","autoComplete","readOnly","min"],"sources":["C:/Users/hp/OneDrive/Desktop/frontend/src/components/Billing.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport axios from 'axios';\r\nimport BoxLoader from \"./looader/BoxLoader\";\r\nimport { Import } from 'lucide-react';\r\n\r\n\r\n// Base URL: replace with your actual API domain\r\n\r\nimport BASE_URL from '../config';\r\n// Axios instance factory (adds bearer token)\r\nconst getToken = () => localStorage.getItem(\"lalitkumar_choudhary\") || \"\";\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: BASE_URL,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\n// Request helper with simple retry logic\r\nconst requestWithRetry = async (config, retries = 2, backoff = 500) => {\r\n    try {\r\n        const token = getToken();\r\n        if (!config.headers) config.headers = {};\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n        return await axiosInstance.request(config);\r\n    } catch (err) {\r\n        if (retries > 0) {\r\n            await new Promise(r => setTimeout(r, backoff));\r\n            return requestWithRetry(config, retries - 1, backoff * 2);\r\n        }\r\n        throw err;\r\n    }\r\n};\r\n\r\n// API functions\r\nconst api = {\r\n    fetchSuggestions: async (query) => {\r\n        try {\r\n            const response = await requestWithRetry({\r\n                method: 'GET',\r\n                url: `/admin/medicines/recommendation`,\r\n                params: { query },\r\n            });\r\n            // expecting response.data.recommendations[]\r\n            return { status: 'success', recommendations: response.data.recommendations || [] };\r\n        } catch (error) {\r\n            console.error(\"Error fetching suggestions:\", error);\r\n            return { status: 'error', message: 'Failed to fetch suggestions.', recommendations: [] };\r\n        }\r\n    },\r\n    fetchMedicineDetails: async (medicineId) => {\r\n        try {\r\n            const response = await requestWithRetry({\r\n                method: 'GET',\r\n                url: `/admin/medicne_info/${medicineId}`,\r\n            });\r\n            // assuming full medicine info in response.data (or array)\r\n            return { status: 'success', medicine: response.data };\r\n        } catch (error) {\r\n            console.error(\"Error fetching medicine details:\", error);\r\n            return { status: 'error', message: 'Failed to fetch medicine details.', medicine: null };\r\n        }\r\n    },\r\n    generateBill: async (billPayload) => {\r\n        try {\r\n            const response = await requestWithRetry({\r\n                method: 'POST',\r\n                url: `/admin/sales`,\r\n                data: billPayload,\r\n            });\r\n            return { status: 'success', message: response.data.message || 'Bill generated successfully.' };\r\n        } catch (error) {\r\n            console.error(\"Error generating bill:\", error);\r\n            const msg = error?.response?.data?.message || 'Failed to generate bill.';\r\n            return { status: 'error', message: msg };\r\n        }\r\n    }\r\n};\r\n\r\n// Debounce util\r\nconst debounce = (func, delay) => {\r\n    let timeout;\r\n    return (...args) => {\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(() => func(...args), delay);\r\n    };\r\n};\r\n\r\nconst Modal = ({ children, onClose }) => {\r\n    return createPortal(\r\n        <div className=\"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n            <div className=\"relative w-full max-w-md bg-white rounded-xl shadow-lg p-6\">\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors\"\r\n                >\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                </button>\r\n                {children}\r\n            </div>\r\n        </div>,\r\n        document.body\r\n    );\r\n};\r\n\r\nconst AlertModal = ({ message, onClose }) => {\r\n    return (\r\n        <div className=\"absolute inset-0 bg-red-100 bg-opacity-75 flex items-center justify-center p-4 z-50 rounded-xl\">\r\n            <div className=\"bg-white rounded-xl shadow-lg p-6 text-center\">\r\n                <p className=\"text-lg font-semibold text-red-600 mb-4\">{message}</p>\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\"\r\n                >\r\n                    OK\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function Billing() {\r\n    // Theme definitions for each bill\r\n    const billThemes = [\r\n        {\r\n            bg: 'bg-purple-100',\r\n            btnBg: 'bg-purple-600',\r\n            btnText: 'text-purple-700',\r\n            btnHoverBg: 'hover:bg-purple-700',\r\n            activeNav: 'bg-purple-600 text-white',\r\n            inactiveNavBg: 'bg-purple-100',\r\n            inactiveNavText: 'text-purple-700',\r\n        },\r\n        {\r\n            bg: 'bg-green-100',\r\n            btnBg: 'bg-green-600',\r\n            btnText: 'text-green-700',\r\n            btnHoverBg: 'hover:bg-green-700',\r\n            activeNav: 'bg-green-600 text-white',\r\n            inactiveNavBg: 'bg-green-100',\r\n            inactiveNavText: 'text-green-700',\r\n        },\r\n        {\r\n            bg: 'bg-blue-100',\r\n            btnBg: 'bg-blue-600',\r\n            btnText: 'text-blue-700',\r\n            btnHoverBg: 'hover:bg-blue-700',\r\n            activeNav: 'bg-blue-600 text-white',\r\n            inactiveNavBg: 'bg-blue-100',\r\n            inactiveNavText: 'text-blue-700',\r\n        },\r\n    ];\r\n\r\n    // State\r\n    const [bills, setBills] = useState([\r\n        { customerName: '', contactNumber: '', paymentMethod: 'Cash', medicines: [] },\r\n        { customerName: '', contactNumber: '', paymentMethod: 'Cash', medicines: [] },\r\n        { customerName: '', contactNumber: '', paymentMethod: 'Cash', medicines: [] },\r\n    ]);\r\n    const [activeBillIndex, setActiveBillIndex] = useState(0);\r\n\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalForm, setModalForm] = useState({\r\n        medicineName: '',\r\n        purchasePrice: '',\r\n        stockQuantity: '',\r\n        quantity: 1,\r\n        sellPrice: '',\r\n        medicineId: null,\r\n        batchNo: '',\r\n    });\r\n    const [suggestions, setSuggestions] = useState([]);\r\n    const [suggestionLoading, setSuggestionLoading] = useState(false);\r\n    const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(-1);\r\n    const [modalAlert, setModalAlert] = useState({ show: false, message: '' });\r\n    const [isGeneratingBill, setIsGeneratingBill] = useState(false);\r\n    const [billMessage, setBillMessage] = useState({ show: false, message: '', type: '' });\r\n\r\n    const activeBill = bills[activeBillIndex];\r\n\r\n    // Ref for autofocus\r\n    const medicineInputRef = useRef(null);\r\n\r\n    // Handlers\r\n    const handleBillChange = (index) => {\r\n        setActiveBillIndex(index);\r\n    };\r\n\r\n    const handleCustomerChange = (e) => {\r\n        const { name, value } = e.target;\r\n        const newBills = [...bills];\r\n        newBills[activeBillIndex] = { ...newBills[activeBillIndex], [name]: value };\r\n        setBills(newBills);\r\n    };\r\n\r\n    const handleModalFormChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setModalForm(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleOpenModal = () => {\r\n        setModalForm({\r\n            medicineName: '',\r\n            purchasePrice: '',\r\n            stockQuantity: '',\r\n            quantity: 1,\r\n            sellPrice: '',\r\n            medicineId: null,\r\n            batchNo: '',\r\n        });\r\n        setSuggestions([]);\r\n        setSelectedSuggestionIndex(-1);\r\n        setModalAlert({ show: false, message: '' });\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setShowModal(false);\r\n        setSuggestions([]);\r\n        setSelectedSuggestionIndex(-1);\r\n        setModalAlert({ show: false, message: '' });\r\n    };\r\n\r\n    // Auto-focus when modal opens\r\n    useEffect(() => {\r\n        if (showModal && medicineInputRef.current) {\r\n            medicineInputRef.current.focus();\r\n        }\r\n    }, [showModal]);\r\n\r\n    // Debounced fetch\r\n    const debouncedFetchSuggestions = useCallback(\r\n        debounce(async (query) => {\r\n            if (query.trim().length > 1) {\r\n                setSuggestionLoading(true);\r\n                try {\r\n                    const response = await api.fetchSuggestions(query);\r\n                    if (response.status === \"success\") {\r\n                        setSuggestions(response.recommendations || []);\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Error fetching suggestions:\", error);\r\n                } finally {\r\n                    setSuggestionLoading(false);\r\n                }\r\n            } else {\r\n                setSuggestions([]);\r\n            }\r\n        }, 300),\r\n        []\r\n    );\r\n\r\n    const handleMedicineNameChange = (e) => {\r\n        const value = e.target.value;\r\n        setModalForm(prev => ({ ...prev, medicineName: value, medicineId: null, batchNo: '' }));\r\n        debouncedFetchSuggestions(value);\r\n        setSelectedSuggestionIndex(-1);\r\n    };\r\n\r\n    const handleSuggestionSelect = useCallback(async (suggestion) => {\r\n        try {\r\n            const response = await api.fetchMedicineDetails(suggestion.medicine_id);\r\n            if (response.status === \"success\" && response.medicine) {\r\n                    console.log(response);\r\n                const medicine = response.medicine.medicine[0];\r\n                    console.log(medicine);\r\n                    \r\n                setModalForm({\r\n                    medicineName: `${medicine.medicine_name} (${medicine.batch_no})`,\r\n                    purchasePrice: medicine.purchase_price,\r\n                    stockQuantity: medicine.stock_quantity,\r\n                    quantity: 1,\r\n                    sellPrice: medicine.mrp,\r\n                    medicineId: medicine.medicine_id,\r\n                    batchNo: medicine.batch_no,\r\n                });\r\n                setSuggestions([]);\r\n                setSelectedSuggestionIndex(-1);\r\n            } else {\r\n                setModalAlert({ show: true, message: \"Could not load medicine details.\" });\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching medicine details:\", error);\r\n            setModalAlert({ show: true, message: \"Failed to fetch medicine details.\" });\r\n        }\r\n    }, []);\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (suggestions.length === 0) return;\r\n\r\n        if (e.key === 'ArrowDown') {\r\n            e.preventDefault();\r\n            setSelectedSuggestionIndex(prev => (prev + 1) % suggestions.length);\r\n        } else if (e.key === 'ArrowUp') {\r\n            e.preventDefault();\r\n            setSelectedSuggestionIndex(prev => (prev - 1 + suggestions.length) % suggestions.length);\r\n        } else if (e.key === 'Enter' && selectedSuggestionIndex !== -1) {\r\n            e.preventDefault();\r\n            handleSuggestionSelect(suggestions[selectedSuggestionIndex]);\r\n        }\r\n    };\r\n\r\n    const handleAddToBill = () => {\r\n        const { quantity, stockQuantity, sellPrice, purchasePrice, medicineName, medicineId, batchNo } = modalForm;\r\n\r\n        if (parseFloat(sellPrice) < parseFloat(purchasePrice)) {\r\n            setModalAlert({ show: true, message: \"Sell Price is less than Purchase Price!\" });\r\n            return;\r\n        }\r\n\r\n        if (parseInt(quantity, 10) > parseInt(stockQuantity, 10)) {\r\n            setModalAlert({ show: true, message: \"Quantity is more than available stock!\" });\r\n            return;\r\n        }\r\n\r\n        if (!medicineId) {\r\n            setModalAlert({ show: true, message: \"Please select a medicine from the suggestions.\" });\r\n            return;\r\n        }\r\n\r\n        const newMedicine = {\r\n            medicine_id: medicineId,\r\n            medicine_name: medicineName.split('(')[0].trim(),\r\n            batch_no: batchNo,\r\n            quantity: parseInt(quantity, 10),\r\n            price_per_unit: parseFloat(sellPrice),\r\n            total: parseFloat(sellPrice) * parseInt(quantity, 10),\r\n        };\r\n\r\n        const newBills = [...bills];\r\n        newBills[activeBillIndex] = {\r\n            ...newBills[activeBillIndex],\r\n            medicines: [...newBills[activeBillIndex].medicines, newMedicine],\r\n        };\r\n        setBills(newBills);\r\n        handleCloseModal();\r\n    };\r\n\r\n    const totalAmount = useMemo(() => {\r\n        return activeBill.medicines.reduce((acc, med) => acc + med.total, 0);\r\n    }, [activeBill.medicines]);\r\n\r\n    const handleGenerateBill = async () => {\r\n        setIsGeneratingBill(true);\r\n        const billPayload = {\r\n            customer_name: activeBill.customerName,\r\n            contact_number: activeBill.contactNumber,\r\n            employee_id: 3, // Hardcoded per earlier\r\n            payment_method: activeBill.paymentMethod,\r\n            medicines: activeBill.medicines.map(med => ({\r\n                medicine_id: med.medicine_id,\r\n                quantity: med.quantity,\r\n                rate: String(med.price_per_unit),\r\n            })),\r\n        };\r\n\r\n        try {\r\n            const response = await api.generateBill(billPayload);\r\n            if (response.status === \"success\") {\r\n                setBillMessage({ show: true, message: response.message, type: 'success' });\r\n                // Reset current bill\r\n                const newBills = [...bills];\r\n                newBills[activeBillIndex] = {\r\n                    customerName: '',\r\n                    contactNumber: '',\r\n                    paymentMethod: 'Cash',\r\n                    medicines: [],\r\n                };\r\n                setBills(newBills);\r\n            } else {\r\n                setBillMessage({ show: true, message: response.message || \"Failed to generate bill.\", type: 'error' });\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error generating bill:\", error);\r\n            setBillMessage({ show: true, message: \"Failed to generate bill.\", type: 'error' });\r\n        } finally {\r\n            setIsGeneratingBill(false);\r\n            setTimeout(() => setBillMessage({ show: false, message: '', type: '' }), 3000);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`min-h-screen bg-white text-gray-800 p-4 font-sans flex items-start justify-center`}>\r\n            {/* Main Billing Container */}\r\n            <div className={`w-full max-w-5xl ${billThemes[activeBillIndex].bg}  rounded-2xl shadow-xl p-6 lg:p-10 my-8`}>\r\n\r\n                {/* Header */}\r\n                <div className=\"flex items-center space-x-4 mb-8\">\r\n                    <button\r\n                        onClick={() => console.log('Go back')}\r\n                        className={`${\r\n                            billThemes[activeBillIndex].btnText\r\n                        } hover:opacity-80 transition-colors p-2`}\r\n                    >\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n                        </svg>\r\n                    </button>\r\n                    <h1 className={`text-2xl font-bold ${billThemes[activeBillIndex].btnText}`}>Medicine Billing</h1>\r\n                </div>\r\n\r\n                {/* Customer Details & Actions */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n                    <div className=\"flex flex-col\">\r\n                        <label htmlFor=\"customerName\" className=\"text-sm font-medium text-gray-600 mb-1\">Customer Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"customerName\"\r\n                            name=\"customerName\"\r\n                            value={activeBill.customerName}\r\n                            onChange={handleCustomerChange}\r\n                            placeholder=\"Enter customer name\"\r\n                            className=\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col\">\r\n                        <label htmlFor=\"contactNumber\" className=\"text-sm font-medium text-gray-600 mb-1\">Contact No.</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"contactNumber\"\r\n                            name=\"contactNumber\"\r\n                            value={activeBill.contactNumber}\r\n                            onChange={handleCustomerChange}\r\n                            placeholder=\"Enter contact number\"\r\n                            className=\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col\">\r\n                        <label htmlFor=\"paymentMethod\" className=\"text-sm font-medium text-gray-600 mb-1\">Payment Method</label>\r\n                        <select\r\n                            id=\"paymentMethod\"\r\n                            name=\"paymentMethod\"\r\n                            value={activeBill.paymentMethod}\r\n                            onChange={handleCustomerChange}\r\n                            className=\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"\r\n                        >\r\n                            <option value=\"Cash\">Cash</option>\r\n                            <option value=\"Card\">Card</option>\r\n                            <option value=\"UPI\">UPI</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end mb-6\">\r\n                    <button\r\n                        onClick={handleOpenModal}\r\n                        className={`${billThemes[activeBillIndex].btnBg} text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-colors ${billThemes[activeBillIndex].btnHoverBg}`}\r\n                    >\r\n                        Add Medicine\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Medicine Table */}\r\n                <div className=\"overflow-x-auto rounded-xl shadow-inner mb-6\">\r\n                    <table className=\"min-w-full bg-white\">\r\n                        <thead className=\"bg-green-100 border-b-2 border-green-200\">\r\n                            <tr>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Medicine</th>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Batch No.</th>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Quantity</th>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Price/Unit</th>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Total</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {activeBill.medicines.length > 0 ? (\r\n                                activeBill.medicines.map((med, index) => (\r\n                                    <tr key={index} className=\"border-b border-gray-200 hover:bg-gray-50 transition-colors\">\r\n                                        <td className=\"py-3 px-4 text-gray-700\">{med.medicine_name}</td>\r\n                                        <td className=\"py-3 px-4 text-gray-700\">{med.batch_no}</td>\r\n                                        <td className=\"py-3 px-4 text-gray-700\">{med.quantity}</td>\r\n                                        <td className=\"py-3 px-4 text-gray-700\">₹{med.price_per_unit.toFixed(2)}</td>\r\n                                        <td className=\"py-3 px-4 text-gray-700\">₹{med.total.toFixed(2)}</td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                <tr>\r\n                                    <td colSpan=\"5\" className=\"py-10 text-center text-gray-500 italic\">No medicines added yet.</td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {/* Total and Generate Bill */}\r\n                <div className=\"flex justify-between items-center mb-8\">\r\n                    <span className=\"text-xl font-bold text-green-700\">Total Amount</span>\r\n                    <span className=\"text-2xl font-bold text-green-700\">₹{totalAmount.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-end\">\r\n                    <button\r\n                        onClick={handleGenerateBill}\r\n                        disabled={isGeneratingBill || activeBill.medicines.length === 0}\r\n                        className={`${billThemes[activeBillIndex].btnBg} text-white font-semibold py-3 px-8 rounded-lg shadow-lg transition-colors ${billThemes[activeBillIndex].btnHoverBg} disabled:bg-gray-400 disabled:cursor-not-allowed`}\r\n                    >\r\n                        {isGeneratingBill ? 'Generating...' : 'Generate New Bill'}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Success/Error Message */}\r\n                {billMessage.show && (\r\n                    <div className={`mt-4 p-4 rounded-lg font-semibold text-center transition-opacity duration-300 ${billMessage.type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'}`}>\r\n                        {billMessage.message}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Bill Navigation */}\r\n                <div className=\"mt-8 flex justify-center space-x-4\">\r\n                    {[1, 2, 3].map((billNumber, index) => (\r\n                        <button\r\n                            key={index}\r\n                            onClick={() => handleBillChange(index)}\r\n                            className={`py-2 px-6 rounded-lg font-semibold transition-all duration-300\r\n                                ${activeBillIndex === index\r\n                                    ? `${billThemes[index].activeNav} shadow-md scale-105`\r\n                                    : `${billThemes[index].inactiveNavBg} ${billThemes[index].inactiveNavText} hover:brightness-95 border border-gray-200`\r\n                                }`}\r\n                        >\r\n                            Bill {billNumber}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Add Medicine Modal */}\r\n            {showModal && (\r\n                <Modal onClose={handleCloseModal}>\r\n                    {modalAlert.show ? (\r\n                        <AlertModal message={modalAlert.message} onClose={() => setModalAlert({ show: false, message: '' })} />\r\n                    ) : (\r\n                        <div className=\"p-4\">\r\n                            <h2 className=\"text-xl font-bold mb-2\">Add Medicine</h2>\r\n                            <p className=\"text-gray-500 text-sm mb-6\">Enter the details of the medicine to add to the bill.</p>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"relative\">\r\n                                    <label htmlFor=\"medicineName\" className=\"text-sm font-medium text-gray-600\">Medicine Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"medicineName\"\r\n                                        name=\"medicineName\"\r\n                                        value={modalForm.medicineName}\r\n                                        onChange={handleMedicineNameChange}\r\n                                        onKeyDown={handleKeyDown}\r\n                                        placeholder=\"Search medicine by name or batch no.\"\r\n                                        ref={medicineInputRef}\r\n                                        className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"\r\n                                        autoComplete=\"off\"\r\n                                    />\r\n                                    {(suggestionLoading || suggestions.length > 0) && (\r\n                                        <div className=\"absolute top-full left-0 right-0 z-10 bg-white rounded-lg shadow-lg border border-gray-200 mt-1 max-h-60 overflow-y-auto\">\r\n                                            {suggestionLoading && <div className=\"p-3 text-center text-gray-500\">Loading...</div>}\r\n                                            {suggestions.length > 0 && suggestions.map((suggestion, index) => (\r\n                                                <div\r\n                                                    key={suggestion.medicine_id + suggestion.batch_no}\r\n                                                    onClick={() => handleSuggestionSelect(suggestion)}\r\n                                                    className={`cursor-pointer px-4 py-3 hover:bg-green-50 transition-colors\r\n                                                        ${index === selectedSuggestionIndex ? 'bg-green-100' : ''}`}\r\n                                                >\r\n                                                    {suggestion.medicine_name} ({suggestion.batch_no})\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <label htmlFor=\"purchasePrice\" className=\"text-sm font-medium text-gray-600\">Purchase Price</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            id=\"purchasePrice\"\r\n                                            name=\"purchasePrice\"\r\n                                            value={modalForm.purchasePrice}\r\n                                            readOnly\r\n                                            className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 text-gray-600\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <label htmlFor=\"stockQuantity\" className=\"text-sm font-medium text-gray-600\">Stock Quantity</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            id=\"stockQuantity\"\r\n                                            name=\"stockQuantity\"\r\n                                            value={modalForm.stockQuantity}\r\n                                            readOnly\r\n                                            className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 text-gray-600\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <label htmlFor=\"quantity\" className=\"text-sm font-medium text-gray-600\">Quantity</label>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            id=\"quantity\"\r\n                                            name=\"quantity\"\r\n                                            value={modalForm.quantity}\r\n                                            onChange={handleModalFormChange}\r\n                                            min=\"1\"\r\n                                            className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <label htmlFor=\"sellPrice\" className=\"text-sm font-medium text-gray-600\">Sell Price (MRP)</label>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            id=\"sellPrice\"\r\n                                            name=\"sellPrice\"\r\n                                            value={modalForm.sellPrice}\r\n                                            onChange={handleModalFormChange}\r\n                                            min=\"0\"\r\n                                            className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={handleAddToBill}\r\n                                className=\"w-full mt-8 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:bg-green-700 transition-colors disabled:bg-gray-400\"\r\n                                disabled={!modalForm.medicineId || !modalForm.quantity || !modalForm.sellPrice}\r\n                            >\r\n                                Add to Bill\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </Modal>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}