{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Desktop\\\\frontend\\\\src\\\\components\\\\Billing.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport axios from 'axios';\nimport BoxLoader from \"./looader/BoxLoader\";\n\n// Base URL: replace with your actual API domain\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BaseUrl = 'http://localhost:4000'; // e.g., https://api.somedomain.com\n\n// Axios instance factory (adds bearer token)\nconst getToken = () => localStorage.getItem(\"lalitkumar_choudhary\") || \"\";\nconst axiosInstance = axios.create({\n  baseURL: BaseUrl,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request helper with simple retry logic\nconst requestWithRetry = async (config, retries = 2, backoff = 500) => {\n  try {\n    const token = getToken();\n    if (!config.headers) config.headers = {};\n    config.headers.Authorization = `Bearer ${token}`;\n    return await axiosInstance.request(config);\n  } catch (err) {\n    if (retries > 0) {\n      await new Promise(r => setTimeout(r, backoff));\n      return requestWithRetry(config, retries - 1, backoff * 2);\n    }\n    throw err;\n  }\n};\n\n// API functions\nconst api = {\n  fetchSuggestions: async query => {\n    try {\n      const response = await requestWithRetry({\n        method: 'GET',\n        url: `/admin/medicines/recommendation`,\n        params: {\n          query\n        }\n      });\n      // expecting response.data.recommendations[]\n      return {\n        status: 'success',\n        recommendations: response.data.recommendations || []\n      };\n    } catch (error) {\n      console.error(\"Error fetching suggestions:\", error);\n      return {\n        status: 'error',\n        message: 'Failed to fetch suggestions.',\n        recommendations: []\n      };\n    }\n  },\n  fetchMedicineDetails: async medicineId => {\n    try {\n      const response = await requestWithRetry({\n        method: 'GET',\n        url: `/admin/medicne_info/${medicineId}`\n      });\n      // assuming full medicine info in response.data (or array)\n      return {\n        status: 'success',\n        medicine: response.data\n      };\n    } catch (error) {\n      console.error(\"Error fetching medicine details:\", error);\n      return {\n        status: 'error',\n        message: 'Failed to fetch medicine details.',\n        medicine: null\n      };\n    }\n  },\n  generateBill: async billPayload => {\n    try {\n      const response = await requestWithRetry({\n        method: 'POST',\n        url: `/admin/sales`,\n        data: billPayload\n      });\n      return {\n        status: 'success',\n        message: response.data.message || 'Bill generated successfully.'\n      };\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Error generating bill:\", error);\n      const msg = (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to generate bill.';\n      return {\n        status: 'error',\n        message: msg\n      };\n    }\n  }\n};\n\n// Debounce util\nconst debounce = (func, delay) => {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), delay);\n  };\n};\nconst Modal = ({\n  children,\n  onClose\n}) => {\n  return /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full max-w-md bg-white rounded-xl shadow-lg p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"h-6 w-6\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M6 18L18 6M6 6l12 12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this), document.body);\n};\n_c = Modal;\nconst AlertModal = ({\n  message,\n  onClose\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"absolute inset-0 bg-red-100 bg-opacity-75 flex items-center justify-center p-4 z-50 rounded-xl\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-lg p-6 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg font-semibold text-red-600 mb-4\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\",\n        children: \"OK\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 9\n  }, this);\n};\n_c2 = AlertModal;\nexport default function Billing() {\n  _s();\n  // Theme definitions for each bill\n  const billThemes = [{\n    bg: 'bg-purple-50',\n    btnBg: 'bg-purple-600',\n    btnText: 'text-purple-700',\n    btnHoverBg: 'hover:bg-purple-700',\n    activeNav: 'bg-purple-600 text-white',\n    inactiveNavBg: 'bg-white',\n    inactiveNavText: 'text-purple-700'\n  }, {\n    bg: 'bg-green-50',\n    btnBg: 'bg-green-600',\n    btnText: 'text-green-700',\n    btnHoverBg: 'hover:bg-green-700',\n    activeNav: 'bg-green-600 text-white',\n    inactiveNavBg: 'bg-white',\n    inactiveNavText: 'text-green-700'\n  }, {\n    bg: 'bg-blue-50',\n    btnBg: 'bg-blue-600',\n    btnText: 'text-blue-700',\n    btnHoverBg: 'hover:bg-blue-700',\n    activeNav: 'bg-blue-600 text-white',\n    inactiveNavBg: 'bg-white',\n    inactiveNavText: 'text-blue-700'\n  }];\n\n  // State\n  const [bills, setBills] = useState([{\n    customerName: '',\n    contactNumber: '',\n    paymentMethod: 'Cash',\n    medicines: []\n  }, {\n    customerName: '',\n    contactNumber: '',\n    paymentMethod: 'Cash',\n    medicines: []\n  }, {\n    customerName: '',\n    contactNumber: '',\n    paymentMethod: 'Cash',\n    medicines: []\n  }]);\n  const [activeBillIndex, setActiveBillIndex] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  const [modalForm, setModalForm] = useState({\n    medicineName: '',\n    purchasePrice: '',\n    stockQuantity: '',\n    quantity: 1,\n    sellPrice: '',\n    medicineId: null,\n    batchNo: ''\n  });\n  const [suggestions, setSuggestions] = useState([]);\n  const [suggestionLoading, setSuggestionLoading] = useState(false);\n  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(-1);\n  const [modalAlert, setModalAlert] = useState({\n    show: false,\n    message: ''\n  });\n  const [isGeneratingBill, setIsGeneratingBill] = useState(false);\n  const [billMessage, setBillMessage] = useState({\n    show: false,\n    message: '',\n    type: ''\n  });\n  const activeBill = bills[activeBillIndex];\n\n  // Ref for autofocus\n  const medicineInputRef = useRef(null);\n\n  // Handlers\n  const handleBillChange = index => {\n    setActiveBillIndex(index);\n  };\n  const handleCustomerChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    const newBills = [...bills];\n    newBills[activeBillIndex] = {\n      ...newBills[activeBillIndex],\n      [name]: value\n    };\n    setBills(newBills);\n  };\n  const handleModalFormChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setModalForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleOpenModal = () => {\n    setModalForm({\n      medicineName: '',\n      purchasePrice: '',\n      stockQuantity: '',\n      quantity: 1,\n      sellPrice: '',\n      medicineId: null,\n      batchNo: ''\n    });\n    setSuggestions([]);\n    setSelectedSuggestionIndex(-1);\n    setModalAlert({\n      show: false,\n      message: ''\n    });\n    setShowModal(true);\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setSuggestions([]);\n    setSelectedSuggestionIndex(-1);\n    setModalAlert({\n      show: false,\n      message: ''\n    });\n  };\n\n  // Auto-focus when modal opens\n  useEffect(() => {\n    if (showModal && medicineInputRef.current) {\n      medicineInputRef.current.focus();\n    }\n  }, [showModal]);\n\n  // Debounced fetch\n  const debouncedFetchSuggestions = useCallback(debounce(async query => {\n    if (query.trim().length > 1) {\n      setSuggestionLoading(true);\n      try {\n        const response = await api.fetchSuggestions(query);\n        if (response.status === \"success\") {\n          setSuggestions(response.recommendations || []);\n        }\n      } catch (error) {\n        console.error(\"Error fetching suggestions:\", error);\n      } finally {\n        setSuggestionLoading(false);\n      }\n    } else {\n      setSuggestions([]);\n    }\n  }, 300), []);\n  const handleMedicineNameChange = e => {\n    const value = e.target.value;\n    setModalForm(prev => ({\n      ...prev,\n      medicineName: value,\n      medicineId: null,\n      batchNo: ''\n    }));\n    debouncedFetchSuggestions(value);\n    setSelectedSuggestionIndex(-1);\n  };\n  const handleSuggestionSelect = useCallback(async suggestion => {\n    try {\n      const response = await api.fetchMedicineDetails(suggestion.medicine_id);\n      if (response.status === \"success\" && response.medicine) {\n        const medicine = response.medicine[0];\n        console.log(medicine);\n        ;\n        setModalForm({\n          medicineName: `${medicine.medicine_name} (${medicine.batch_no})`,\n          purchasePrice: medicine.purchase_price,\n          stockQuantity: medicine.stock_quantity,\n          quantity: 1,\n          sellPrice: medicine.mrp,\n          medicineId: medicine.medicine_id,\n          batchNo: medicine.batch_no\n        });\n        setSuggestions([]);\n        setSelectedSuggestionIndex(-1);\n      } else {\n        setModalAlert({\n          show: true,\n          message: \"Could not load medicine details.\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Error fetching medicine details:\", error);\n      setModalAlert({\n        show: true,\n        message: \"Failed to fetch medicine details.\"\n      });\n    }\n  }, []);\n  const handleKeyDown = e => {\n    if (suggestions.length === 0) return;\n    if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      setSelectedSuggestionIndex(prev => (prev + 1) % suggestions.length);\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      setSelectedSuggestionIndex(prev => (prev - 1 + suggestions.length) % suggestions.length);\n    } else if (e.key === 'Enter' && selectedSuggestionIndex !== -1) {\n      e.preventDefault();\n      handleSuggestionSelect(suggestions[selectedSuggestionIndex]);\n    }\n  };\n  const handleAddToBill = () => {\n    const {\n      quantity,\n      stockQuantity,\n      sellPrice,\n      purchasePrice,\n      medicineName,\n      medicineId,\n      batchNo\n    } = modalForm;\n    if (parseFloat(sellPrice) < parseFloat(purchasePrice)) {\n      setModalAlert({\n        show: true,\n        message: \"Sell Price is less than Purchase Price!\"\n      });\n      return;\n    }\n    if (parseInt(quantity, 10) > parseInt(stockQuantity, 10)) {\n      setModalAlert({\n        show: true,\n        message: \"Quantity is more than available stock!\"\n      });\n      return;\n    }\n    if (!medicineId) {\n      setModalAlert({\n        show: true,\n        message: \"Please select a medicine from the suggestions.\"\n      });\n      return;\n    }\n    const newMedicine = {\n      medicine_id: medicineId,\n      medicine_name: medicineName.split('(')[0].trim(),\n      batch_no: batchNo,\n      quantity: parseInt(quantity, 10),\n      price_per_unit: parseFloat(sellPrice),\n      total: parseFloat(sellPrice) * parseInt(quantity, 10)\n    };\n    const newBills = [...bills];\n    newBills[activeBillIndex] = {\n      ...newBills[activeBillIndex],\n      medicines: [...newBills[activeBillIndex].medicines, newMedicine]\n    };\n    setBills(newBills);\n    handleCloseModal();\n  };\n  const totalAmount = useMemo(() => {\n    return activeBill.medicines.reduce((acc, med) => acc + med.total, 0);\n  }, [activeBill.medicines]);\n  const handleGenerateBill = async () => {\n    setIsGeneratingBill(true);\n    const billPayload = {\n      customer_name: activeBill.customerName,\n      contact_number: activeBill.contactNumber,\n      employee_id: 3,\n      // Hardcoded per earlier\n      payment_method: activeBill.paymentMethod,\n      medicines: activeBill.medicines.map(med => ({\n        medicine_id: med.medicine_id,\n        quantity: med.quantity,\n        rate: String(med.price_per_unit)\n      }))\n    };\n    try {\n      const response = await api.generateBill(billPayload);\n      if (response.status === \"success\") {\n        setBillMessage({\n          show: true,\n          message: response.message,\n          type: 'success'\n        });\n        // Reset current bill\n        const newBills = [...bills];\n        newBills[activeBillIndex] = {\n          customerName: '',\n          contactNumber: '',\n          paymentMethod: 'Cash',\n          medicines: []\n        };\n        setBills(newBills);\n      } else {\n        setBillMessage({\n          show: true,\n          message: response.message || \"Failed to generate bill.\",\n          type: 'error'\n        });\n      }\n    } catch (error) {\n      console.error(\"Error generating bill:\", error);\n      setBillMessage({\n        show: true,\n        message: \"Failed to generate bill.\",\n        type: 'error'\n      });\n    } finally {\n      setIsGeneratingBill(false);\n      setTimeout(() => setBillMessage({\n        show: false,\n        message: '',\n        type: ''\n      }), 3000);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen ${billThemes[activeBillIndex].bg} text-gray-800 p-4 font-sans flex items-start justify-center`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-5xl bg-white rounded-2xl shadow-xl p-6 lg:p-10 my-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => console.log('Go back'),\n          className: `${billThemes[activeBillIndex].btnText} hover:opacity-80 transition-colors p-2`,\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-6 w-6\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M10 19l-7-7m0 0l7-7m-7 7h18\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: `text-2xl font-bold ${billThemes[activeBillIndex].btnText}`,\n          children: \"Medicine Billing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"customerName\",\n            className: \"text-sm font-medium text-gray-600 mb-1\",\n            children: \"Customer Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"customerName\",\n            name: \"customerName\",\n            value: activeBill.customerName,\n            onChange: handleCustomerChange,\n            placeholder: \"Enter customer name\",\n            className: \"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"contactNumber\",\n            className: \"text-sm font-medium text-gray-600 mb-1\",\n            children: \"Contact No.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"contactNumber\",\n            name: \"contactNumber\",\n            value: activeBill.contactNumber,\n            onChange: handleCustomerChange,\n            placeholder: \"Enter contact number\",\n            className: \"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"paymentMethod\",\n            className: \"text-sm font-medium text-gray-600 mb-1\",\n            children: \"Payment Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"paymentMethod\",\n            name: \"paymentMethod\",\n            value: activeBill.paymentMethod,\n            onChange: handleCustomerChange,\n            className: \"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Cash\",\n              children: \"Cash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Card\",\n              children: \"Card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"UPI\",\n              children: \"UPI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleOpenModal,\n          className: `${billThemes[activeBillIndex].btnBg} text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-colors ${billThemes[activeBillIndex].btnHoverBg}`,\n          children: \"Add Medicine\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto rounded-xl shadow-inner mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full bg-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-green-100 border-b-2 border-green-200\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left text-sm font-semibold text-gray-700\",\n                children: \"Medicine\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left text-sm font-semibold text-gray-700\",\n                children: \"Batch No.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left text-sm font-semibold text-gray-700\",\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left text-sm font-semibold text-gray-700\",\n                children: \"Price/Unit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left text-sm font-semibold text-gray-700\",\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: activeBill.medicines.length > 0 ? activeBill.medicines.map((med, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-b border-gray-200 hover:bg-gray-50 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4 text-gray-700\",\n                children: med.medicine_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4 text-gray-700\",\n                children: med.batch_no\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4 text-gray-700\",\n                children: med.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4 text-gray-700\",\n                children: [\"\\u20B9\", med.price_per_unit.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4 text-gray-700\",\n                children: [\"\\u20B9\", med.total.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 41\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 37\n            }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"5\",\n                className: \"py-10 text-center text-gray-500 italic\",\n                children: \"No medicines added yet.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xl font-bold text-green-700\",\n          children: \"Total Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-2xl font-bold text-green-700\",\n          children: [\"\\u20B9\", totalAmount.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleGenerateBill,\n          disabled: isGeneratingBill || activeBill.medicines.length === 0,\n          className: `${billThemes[activeBillIndex].btnBg} text-white font-semibold py-3 px-8 rounded-lg shadow-lg transition-colors ${billThemes[activeBillIndex].btnHoverBg} disabled:bg-gray-400 disabled:cursor-not-allowed`,\n          children: isGeneratingBill ? 'Generating...' : 'Generate New Bill'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 17\n      }, this), billMessage.show && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mt-4 p-4 rounded-lg font-semibold text-center transition-opacity duration-300 ${billMessage.type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'}`,\n        children: billMessage.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 flex justify-center space-x-4\",\n        children: [1, 2, 3].map((billNumber, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleBillChange(index),\n          className: `py-2 px-6 rounded-lg font-semibold transition-all duration-300\n                                ${activeBillIndex === index ? `${billThemes[index].activeNav} shadow-md scale-105` : `${billThemes[index].inactiveNavBg} ${billThemes[index].inactiveNavText} hover:brightness-95 border border-gray-200`}`,\n          children: [\"Bill \", billNumber]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }, this), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      onClose: handleCloseModal,\n      children: modalAlert.show ? /*#__PURE__*/_jsxDEV(AlertModal, {\n        message: modalAlert.message,\n        onClose: () => setModalAlert({\n          show: false,\n          message: ''\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold mb-2\",\n          children: \"Add Medicine\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 text-sm mb-6\",\n          children: \"Enter the details of the medicine to add to the bill.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"medicineName\",\n              className: \"text-sm font-medium text-gray-600\",\n              children: \"Medicine Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"medicineName\",\n              name: \"medicineName\",\n              value: modalForm.medicineName,\n              onChange: handleMedicineNameChange,\n              onKeyDown: handleKeyDown,\n              placeholder: \"Search medicine by name or batch no.\",\n              ref: medicineInputRef,\n              className: \"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\",\n              autoComplete: \"off\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 37\n            }, this), (suggestionLoading || suggestions.length > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-full left-0 right-0 z-10 bg-white rounded-lg shadow-lg border border-gray-200 mt-1 max-h-60 overflow-y-auto\",\n              children: [suggestionLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-3 text-center text-gray-500\",\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 67\n              }, this), suggestions.length > 0 && suggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => handleSuggestionSelect(suggestion),\n                className: `cursor-pointer px-4 py-3 hover:bg-green-50 transition-colors\n                                                        ${index === selectedSuggestionIndex ? 'bg-green-100' : ''}`,\n                children: [suggestion.medicine_name, \" (\", suggestion.batch_no, \")\"]\n              }, suggestion.medicine_id + suggestion.batch_no, true, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 49\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"purchasePrice\",\n                className: \"text-sm font-medium text-gray-600\",\n                children: \"Purchase Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 570,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"purchasePrice\",\n                name: \"purchasePrice\",\n                value: modalForm.purchasePrice,\n                readOnly: true,\n                className: \"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"stockQuantity\",\n                className: \"text-sm font-medium text-gray-600\",\n                children: \"Stock Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"stockQuantity\",\n                name: \"stockQuantity\",\n                value: modalForm.stockQuantity,\n                readOnly: true,\n                className: \"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"quantity\",\n                className: \"text-sm font-medium text-gray-600\",\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"quantity\",\n                name: \"quantity\",\n                value: modalForm.quantity,\n                onChange: handleModalFormChange,\n                min: \"1\",\n                className: \"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"sellPrice\",\n                className: \"text-sm font-medium text-gray-600\",\n                children: \"Sell Price (MRP)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"sellPrice\",\n                name: \"sellPrice\",\n                value: modalForm.sellPrice,\n                onChange: handleModalFormChange,\n                min: \"0\",\n                className: \"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddToBill,\n          className: \"w-full mt-8 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:bg-green-700 transition-colors disabled:bg-gray-400\",\n          disabled: !modalForm.medicineId || !modalForm.quantity || !modalForm.sellPrice,\n          children: \"Add to Bill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 9\n  }, this);\n}\n_s(Billing, \"Bu4X5qmqX5RZX/+qrEuqNc6prgQ=\");\n_c3 = Billing;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Modal\");\n$RefreshReg$(_c2, \"AlertModal\");\n$RefreshReg$(_c3, \"Billing\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useRef","createPortal","axios","BoxLoader","jsxDEV","_jsxDEV","BaseUrl","getToken","localStorage","getItem","axiosInstance","create","baseURL","headers","requestWithRetry","config","retries","backoff","token","Authorization","request","err","Promise","r","setTimeout","api","fetchSuggestions","query","response","method","url","params","status","recommendations","data","error","console","message","fetchMedicineDetails","medicineId","medicine","generateBill","billPayload","_error$response","_error$response$data","msg","debounce","func","delay","timeout","args","clearTimeout","Modal","children","onClose","className","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","document","body","_c","AlertModal","_c2","Billing","_s","billThemes","bg","btnBg","btnText","btnHoverBg","activeNav","inactiveNavBg","inactiveNavText","bills","setBills","customerName","contactNumber","paymentMethod","medicines","activeBillIndex","setActiveBillIndex","showModal","setShowModal","modalForm","setModalForm","medicineName","purchasePrice","stockQuantity","quantity","sellPrice","batchNo","suggestions","setSuggestions","suggestionLoading","setSuggestionLoading","selectedSuggestionIndex","setSelectedSuggestionIndex","modalAlert","setModalAlert","show","isGeneratingBill","setIsGeneratingBill","billMessage","setBillMessage","type","activeBill","medicineInputRef","handleBillChange","index","handleCustomerChange","e","name","value","target","newBills","handleModalFormChange","prev","handleOpenModal","handleCloseModal","current","focus","debouncedFetchSuggestions","trim","length","handleMedicineNameChange","handleSuggestionSelect","suggestion","medicine_id","log","medicine_name","batch_no","purchase_price","stock_quantity","mrp","handleKeyDown","key","preventDefault","handleAddToBill","parseFloat","parseInt","newMedicine","split","price_per_unit","total","totalAmount","reduce","acc","med","handleGenerateBill","customer_name","contact_number","employee_id","payment_method","map","rate","String","htmlFor","id","onChange","placeholder","toFixed","colSpan","disabled","billNumber","onKeyDown","ref","autoComplete","readOnly","min","_c3","$RefreshReg$"],"sources":["C:/Users/hp/OneDrive/Desktop/frontend/src/components/Billing.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport axios from 'axios';\r\nimport BoxLoader from \"./looader/BoxLoader\";\r\n\r\n// Base URL: replace with your actual API domain\r\nconst BaseUrl = 'http://localhost:4000'; // e.g., https://api.somedomain.com\r\n\r\n// Axios instance factory (adds bearer token)\r\nconst getToken = () => localStorage.getItem(\"lalitkumar_choudhary\") || \"\";\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: BaseUrl,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\n// Request helper with simple retry logic\r\nconst requestWithRetry = async (config, retries = 2, backoff = 500) => {\r\n    try {\r\n        const token = getToken();\r\n        if (!config.headers) config.headers = {};\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n        return await axiosInstance.request(config);\r\n    } catch (err) {\r\n        if (retries > 0) {\r\n            await new Promise(r => setTimeout(r, backoff));\r\n            return requestWithRetry(config, retries - 1, backoff * 2);\r\n        }\r\n        throw err;\r\n    }\r\n};\r\n\r\n// API functions\r\nconst api = {\r\n    fetchSuggestions: async (query) => {\r\n        try {\r\n            const response = await requestWithRetry({\r\n                method: 'GET',\r\n                url: `/admin/medicines/recommendation`,\r\n                params: { query },\r\n            });\r\n            // expecting response.data.recommendations[]\r\n            return { status: 'success', recommendations: response.data.recommendations || [] };\r\n        } catch (error) {\r\n            console.error(\"Error fetching suggestions:\", error);\r\n            return { status: 'error', message: 'Failed to fetch suggestions.', recommendations: [] };\r\n        }\r\n    },\r\n    fetchMedicineDetails: async (medicineId) => {\r\n        try {\r\n            const response = await requestWithRetry({\r\n                method: 'GET',\r\n                url: `/admin/medicne_info/${medicineId}`,\r\n            });\r\n            // assuming full medicine info in response.data (or array)\r\n            return { status: 'success', medicine: response.data };\r\n        } catch (error) {\r\n            console.error(\"Error fetching medicine details:\", error);\r\n            return { status: 'error', message: 'Failed to fetch medicine details.', medicine: null };\r\n        }\r\n    },\r\n    generateBill: async (billPayload) => {\r\n        try {\r\n            const response = await requestWithRetry({\r\n                method: 'POST',\r\n                url: `/admin/sales`,\r\n                data: billPayload,\r\n            });\r\n            return { status: 'success', message: response.data.message || 'Bill generated successfully.' };\r\n        } catch (error) {\r\n            console.error(\"Error generating bill:\", error);\r\n            const msg = error?.response?.data?.message || 'Failed to generate bill.';\r\n            return { status: 'error', message: msg };\r\n        }\r\n    }\r\n};\r\n\r\n// Debounce util\r\nconst debounce = (func, delay) => {\r\n    let timeout;\r\n    return (...args) => {\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(() => func(...args), delay);\r\n    };\r\n};\r\n\r\nconst Modal = ({ children, onClose }) => {\r\n    return createPortal(\r\n        <div className=\"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n            <div className=\"relative w-full max-w-md bg-white rounded-xl shadow-lg p-6\">\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors\"\r\n                >\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                </button>\r\n                {children}\r\n            </div>\r\n        </div>,\r\n        document.body\r\n    );\r\n};\r\n\r\nconst AlertModal = ({ message, onClose }) => {\r\n    return (\r\n        <div className=\"absolute inset-0 bg-red-100 bg-opacity-75 flex items-center justify-center p-4 z-50 rounded-xl\">\r\n            <div className=\"bg-white rounded-xl shadow-lg p-6 text-center\">\r\n                <p className=\"text-lg font-semibold text-red-600 mb-4\">{message}</p>\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\"\r\n                >\r\n                    OK\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function Billing() {\r\n    // Theme definitions for each bill\r\n    const billThemes = [\r\n        {\r\n            bg: 'bg-purple-50',\r\n            btnBg: 'bg-purple-600',\r\n            btnText: 'text-purple-700',\r\n            btnHoverBg: 'hover:bg-purple-700',\r\n            activeNav: 'bg-purple-600 text-white',\r\n            inactiveNavBg: 'bg-white',\r\n            inactiveNavText: 'text-purple-700',\r\n        },\r\n        {\r\n            bg: 'bg-green-50',\r\n            btnBg: 'bg-green-600',\r\n            btnText: 'text-green-700',\r\n            btnHoverBg: 'hover:bg-green-700',\r\n            activeNav: 'bg-green-600 text-white',\r\n            inactiveNavBg: 'bg-white',\r\n            inactiveNavText: 'text-green-700',\r\n        },\r\n        {\r\n            bg: 'bg-blue-50',\r\n            btnBg: 'bg-blue-600',\r\n            btnText: 'text-blue-700',\r\n            btnHoverBg: 'hover:bg-blue-700',\r\n            activeNav: 'bg-blue-600 text-white',\r\n            inactiveNavBg: 'bg-white',\r\n            inactiveNavText: 'text-blue-700',\r\n        },\r\n    ];\r\n\r\n    // State\r\n    const [bills, setBills] = useState([\r\n        { customerName: '', contactNumber: '', paymentMethod: 'Cash', medicines: [] },\r\n        { customerName: '', contactNumber: '', paymentMethod: 'Cash', medicines: [] },\r\n        { customerName: '', contactNumber: '', paymentMethod: 'Cash', medicines: [] },\r\n    ]);\r\n    const [activeBillIndex, setActiveBillIndex] = useState(0);\r\n\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalForm, setModalForm] = useState({\r\n        medicineName: '',\r\n        purchasePrice: '',\r\n        stockQuantity: '',\r\n        quantity: 1,\r\n        sellPrice: '',\r\n        medicineId: null,\r\n        batchNo: '',\r\n    });\r\n    const [suggestions, setSuggestions] = useState([]);\r\n    const [suggestionLoading, setSuggestionLoading] = useState(false);\r\n    const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(-1);\r\n    const [modalAlert, setModalAlert] = useState({ show: false, message: '' });\r\n    const [isGeneratingBill, setIsGeneratingBill] = useState(false);\r\n    const [billMessage, setBillMessage] = useState({ show: false, message: '', type: '' });\r\n\r\n    const activeBill = bills[activeBillIndex];\r\n\r\n    // Ref for autofocus\r\n    const medicineInputRef = useRef(null);\r\n\r\n    // Handlers\r\n    const handleBillChange = (index) => {\r\n        setActiveBillIndex(index);\r\n    };\r\n\r\n    const handleCustomerChange = (e) => {\r\n        const { name, value } = e.target;\r\n        const newBills = [...bills];\r\n        newBills[activeBillIndex] = { ...newBills[activeBillIndex], [name]: value };\r\n        setBills(newBills);\r\n    };\r\n\r\n    const handleModalFormChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setModalForm(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleOpenModal = () => {\r\n        setModalForm({\r\n            medicineName: '',\r\n            purchasePrice: '',\r\n            stockQuantity: '',\r\n            quantity: 1,\r\n            sellPrice: '',\r\n            medicineId: null,\r\n            batchNo: '',\r\n        });\r\n        setSuggestions([]);\r\n        setSelectedSuggestionIndex(-1);\r\n        setModalAlert({ show: false, message: '' });\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setShowModal(false);\r\n        setSuggestions([]);\r\n        setSelectedSuggestionIndex(-1);\r\n        setModalAlert({ show: false, message: '' });\r\n    };\r\n\r\n    // Auto-focus when modal opens\r\n    useEffect(() => {\r\n        if (showModal && medicineInputRef.current) {\r\n            medicineInputRef.current.focus();\r\n        }\r\n    }, [showModal]);\r\n\r\n    // Debounced fetch\r\n    const debouncedFetchSuggestions = useCallback(\r\n        debounce(async (query) => {\r\n            if (query.trim().length > 1) {\r\n                setSuggestionLoading(true);\r\n                try {\r\n                    const response = await api.fetchSuggestions(query);\r\n                    if (response.status === \"success\") {\r\n                        setSuggestions(response.recommendations || []);\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Error fetching suggestions:\", error);\r\n                } finally {\r\n                    setSuggestionLoading(false);\r\n                }\r\n            } else {\r\n                setSuggestions([]);\r\n            }\r\n        }, 300),\r\n        []\r\n    );\r\n\r\n    const handleMedicineNameChange = (e) => {\r\n        const value = e.target.value;\r\n        setModalForm(prev => ({ ...prev, medicineName: value, medicineId: null, batchNo: '' }));\r\n        debouncedFetchSuggestions(value);\r\n        setSelectedSuggestionIndex(-1);\r\n    };\r\n\r\n    const handleSuggestionSelect = useCallback(async (suggestion) => {\r\n        try {\r\n            const response = await api.fetchMedicineDetails(suggestion.medicine_id);\r\n            if (response.status === \"success\" && response.medicine) {\r\n                const medicine = response.medicine[0];\r\n                    console.log(medicine);;\r\n                    \r\n                setModalForm({\r\n                    medicineName: `${medicine.medicine_name} (${medicine.batch_no})`,\r\n                    purchasePrice: medicine.purchase_price,\r\n                    stockQuantity: medicine.stock_quantity,\r\n                    quantity: 1,\r\n                    sellPrice: medicine.mrp,\r\n                    medicineId: medicine.medicine_id,\r\n                    batchNo: medicine.batch_no,\r\n                });\r\n                setSuggestions([]);\r\n                setSelectedSuggestionIndex(-1);\r\n            } else {\r\n                setModalAlert({ show: true, message: \"Could not load medicine details.\" });\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching medicine details:\", error);\r\n            setModalAlert({ show: true, message: \"Failed to fetch medicine details.\" });\r\n        }\r\n    }, []);\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (suggestions.length === 0) return;\r\n\r\n        if (e.key === 'ArrowDown') {\r\n            e.preventDefault();\r\n            setSelectedSuggestionIndex(prev => (prev + 1) % suggestions.length);\r\n        } else if (e.key === 'ArrowUp') {\r\n            e.preventDefault();\r\n            setSelectedSuggestionIndex(prev => (prev - 1 + suggestions.length) % suggestions.length);\r\n        } else if (e.key === 'Enter' && selectedSuggestionIndex !== -1) {\r\n            e.preventDefault();\r\n            handleSuggestionSelect(suggestions[selectedSuggestionIndex]);\r\n        }\r\n    };\r\n\r\n    const handleAddToBill = () => {\r\n        const { quantity, stockQuantity, sellPrice, purchasePrice, medicineName, medicineId, batchNo } = modalForm;\r\n\r\n        if (parseFloat(sellPrice) < parseFloat(purchasePrice)) {\r\n            setModalAlert({ show: true, message: \"Sell Price is less than Purchase Price!\" });\r\n            return;\r\n        }\r\n\r\n        if (parseInt(quantity, 10) > parseInt(stockQuantity, 10)) {\r\n            setModalAlert({ show: true, message: \"Quantity is more than available stock!\" });\r\n            return;\r\n        }\r\n\r\n        if (!medicineId) {\r\n            setModalAlert({ show: true, message: \"Please select a medicine from the suggestions.\" });\r\n            return;\r\n        }\r\n\r\n        const newMedicine = {\r\n            medicine_id: medicineId,\r\n            medicine_name: medicineName.split('(')[0].trim(),\r\n            batch_no: batchNo,\r\n            quantity: parseInt(quantity, 10),\r\n            price_per_unit: parseFloat(sellPrice),\r\n            total: parseFloat(sellPrice) * parseInt(quantity, 10),\r\n        };\r\n\r\n        const newBills = [...bills];\r\n        newBills[activeBillIndex] = {\r\n            ...newBills[activeBillIndex],\r\n            medicines: [...newBills[activeBillIndex].medicines, newMedicine],\r\n        };\r\n        setBills(newBills);\r\n        handleCloseModal();\r\n    };\r\n\r\n    const totalAmount = useMemo(() => {\r\n        return activeBill.medicines.reduce((acc, med) => acc + med.total, 0);\r\n    }, [activeBill.medicines]);\r\n\r\n    const handleGenerateBill = async () => {\r\n        setIsGeneratingBill(true);\r\n        const billPayload = {\r\n            customer_name: activeBill.customerName,\r\n            contact_number: activeBill.contactNumber,\r\n            employee_id: 3, // Hardcoded per earlier\r\n            payment_method: activeBill.paymentMethod,\r\n            medicines: activeBill.medicines.map(med => ({\r\n                medicine_id: med.medicine_id,\r\n                quantity: med.quantity,\r\n                rate: String(med.price_per_unit),\r\n            })),\r\n        };\r\n\r\n        try {\r\n            const response = await api.generateBill(billPayload);\r\n            if (response.status === \"success\") {\r\n                setBillMessage({ show: true, message: response.message, type: 'success' });\r\n                // Reset current bill\r\n                const newBills = [...bills];\r\n                newBills[activeBillIndex] = {\r\n                    customerName: '',\r\n                    contactNumber: '',\r\n                    paymentMethod: 'Cash',\r\n                    medicines: [],\r\n                };\r\n                setBills(newBills);\r\n            } else {\r\n                setBillMessage({ show: true, message: response.message || \"Failed to generate bill.\", type: 'error' });\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error generating bill:\", error);\r\n            setBillMessage({ show: true, message: \"Failed to generate bill.\", type: 'error' });\r\n        } finally {\r\n            setIsGeneratingBill(false);\r\n            setTimeout(() => setBillMessage({ show: false, message: '', type: '' }), 3000);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`min-h-screen ${billThemes[activeBillIndex].bg} text-gray-800 p-4 font-sans flex items-start justify-center`}>\r\n            {/* Main Billing Container */}\r\n            <div className=\"w-full max-w-5xl bg-white rounded-2xl shadow-xl p-6 lg:p-10 my-8\">\r\n\r\n                {/* Header */}\r\n                <div className=\"flex items-center space-x-4 mb-8\">\r\n                    <button\r\n                        onClick={() => console.log('Go back')}\r\n                        className={`${\r\n                            billThemes[activeBillIndex].btnText\r\n                        } hover:opacity-80 transition-colors p-2`}\r\n                    >\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n                        </svg>\r\n                    </button>\r\n                    <h1 className={`text-2xl font-bold ${billThemes[activeBillIndex].btnText}`}>Medicine Billing</h1>\r\n                </div>\r\n\r\n                {/* Customer Details & Actions */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n                    <div className=\"flex flex-col\">\r\n                        <label htmlFor=\"customerName\" className=\"text-sm font-medium text-gray-600 mb-1\">Customer Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"customerName\"\r\n                            name=\"customerName\"\r\n                            value={activeBill.customerName}\r\n                            onChange={handleCustomerChange}\r\n                            placeholder=\"Enter customer name\"\r\n                            className=\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col\">\r\n                        <label htmlFor=\"contactNumber\" className=\"text-sm font-medium text-gray-600 mb-1\">Contact No.</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"contactNumber\"\r\n                            name=\"contactNumber\"\r\n                            value={activeBill.contactNumber}\r\n                            onChange={handleCustomerChange}\r\n                            placeholder=\"Enter contact number\"\r\n                            className=\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col\">\r\n                        <label htmlFor=\"paymentMethod\" className=\"text-sm font-medium text-gray-600 mb-1\">Payment Method</label>\r\n                        <select\r\n                            id=\"paymentMethod\"\r\n                            name=\"paymentMethod\"\r\n                            value={activeBill.paymentMethod}\r\n                            onChange={handleCustomerChange}\r\n                            className=\"bg-gray-100 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all\"\r\n                        >\r\n                            <option value=\"Cash\">Cash</option>\r\n                            <option value=\"Card\">Card</option>\r\n                            <option value=\"UPI\">UPI</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end mb-6\">\r\n                    <button\r\n                        onClick={handleOpenModal}\r\n                        className={`${billThemes[activeBillIndex].btnBg} text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-colors ${billThemes[activeBillIndex].btnHoverBg}`}\r\n                    >\r\n                        Add Medicine\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Medicine Table */}\r\n                <div className=\"overflow-x-auto rounded-xl shadow-inner mb-6\">\r\n                    <table className=\"min-w-full bg-white\">\r\n                        <thead className=\"bg-green-100 border-b-2 border-green-200\">\r\n                            <tr>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Medicine</th>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Batch No.</th>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Quantity</th>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Price/Unit</th>\r\n                                <th className=\"py-3 px-4 text-left text-sm font-semibold text-gray-700\">Total</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {activeBill.medicines.length > 0 ? (\r\n                                activeBill.medicines.map((med, index) => (\r\n                                    <tr key={index} className=\"border-b border-gray-200 hover:bg-gray-50 transition-colors\">\r\n                                        <td className=\"py-3 px-4 text-gray-700\">{med.medicine_name}</td>\r\n                                        <td className=\"py-3 px-4 text-gray-700\">{med.batch_no}</td>\r\n                                        <td className=\"py-3 px-4 text-gray-700\">{med.quantity}</td>\r\n                                        <td className=\"py-3 px-4 text-gray-700\">{med.price_per_unit.toFixed(2)}</td>\r\n                                        <td className=\"py-3 px-4 text-gray-700\">{med.total.toFixed(2)}</td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                <tr>\r\n                                    <td colSpan=\"5\" className=\"py-10 text-center text-gray-500 italic\">No medicines added yet.</td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {/* Total and Generate Bill */}\r\n                <div className=\"flex justify-between items-center mb-8\">\r\n                    <span className=\"text-xl font-bold text-green-700\">Total Amount</span>\r\n                    <span className=\"text-2xl font-bold text-green-700\">{totalAmount.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-end\">\r\n                    <button\r\n                        onClick={handleGenerateBill}\r\n                        disabled={isGeneratingBill || activeBill.medicines.length === 0}\r\n                        className={`${billThemes[activeBillIndex].btnBg} text-white font-semibold py-3 px-8 rounded-lg shadow-lg transition-colors ${billThemes[activeBillIndex].btnHoverBg} disabled:bg-gray-400 disabled:cursor-not-allowed`}\r\n                    >\r\n                        {isGeneratingBill ? 'Generating...' : 'Generate New Bill'}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Success/Error Message */}\r\n                {billMessage.show && (\r\n                    <div className={`mt-4 p-4 rounded-lg font-semibold text-center transition-opacity duration-300 ${billMessage.type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'}`}>\r\n                        {billMessage.message}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Bill Navigation */}\r\n                <div className=\"mt-8 flex justify-center space-x-4\">\r\n                    {[1, 2, 3].map((billNumber, index) => (\r\n                        <button\r\n                            key={index}\r\n                            onClick={() => handleBillChange(index)}\r\n                            className={`py-2 px-6 rounded-lg font-semibold transition-all duration-300\r\n                                ${activeBillIndex === index\r\n                                    ? `${billThemes[index].activeNav} shadow-md scale-105`\r\n                                    : `${billThemes[index].inactiveNavBg} ${billThemes[index].inactiveNavText} hover:brightness-95 border border-gray-200`\r\n                                }`}\r\n                        >\r\n                            Bill {billNumber}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Add Medicine Modal */}\r\n            {showModal && (\r\n                <Modal onClose={handleCloseModal}>\r\n                    {modalAlert.show ? (\r\n                        <AlertModal message={modalAlert.message} onClose={() => setModalAlert({ show: false, message: '' })} />\r\n                    ) : (\r\n                        <div className=\"p-4\">\r\n                            <h2 className=\"text-xl font-bold mb-2\">Add Medicine</h2>\r\n                            <p className=\"text-gray-500 text-sm mb-6\">Enter the details of the medicine to add to the bill.</p>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"relative\">\r\n                                    <label htmlFor=\"medicineName\" className=\"text-sm font-medium text-gray-600\">Medicine Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"medicineName\"\r\n                                        name=\"medicineName\"\r\n                                        value={modalForm.medicineName}\r\n                                        onChange={handleMedicineNameChange}\r\n                                        onKeyDown={handleKeyDown}\r\n                                        placeholder=\"Search medicine by name or batch no.\"\r\n                                        ref={medicineInputRef}\r\n                                        className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"\r\n                                        autoComplete=\"off\"\r\n                                    />\r\n                                    {(suggestionLoading || suggestions.length > 0) && (\r\n                                        <div className=\"absolute top-full left-0 right-0 z-10 bg-white rounded-lg shadow-lg border border-gray-200 mt-1 max-h-60 overflow-y-auto\">\r\n                                            {suggestionLoading && <div className=\"p-3 text-center text-gray-500\">Loading...</div>}\r\n                                            {suggestions.length > 0 && suggestions.map((suggestion, index) => (\r\n                                                <div\r\n                                                    key={suggestion.medicine_id + suggestion.batch_no}\r\n                                                    onClick={() => handleSuggestionSelect(suggestion)}\r\n                                                    className={`cursor-pointer px-4 py-3 hover:bg-green-50 transition-colors\r\n                                                        ${index === selectedSuggestionIndex ? 'bg-green-100' : ''}`}\r\n                                                >\r\n                                                    {suggestion.medicine_name} ({suggestion.batch_no})\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <label htmlFor=\"purchasePrice\" className=\"text-sm font-medium text-gray-600\">Purchase Price</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            id=\"purchasePrice\"\r\n                                            name=\"purchasePrice\"\r\n                                            value={modalForm.purchasePrice}\r\n                                            readOnly\r\n                                            className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 text-gray-600\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <label htmlFor=\"stockQuantity\" className=\"text-sm font-medium text-gray-600\">Stock Quantity</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            id=\"stockQuantity\"\r\n                                            name=\"stockQuantity\"\r\n                                            value={modalForm.stockQuantity}\r\n                                            readOnly\r\n                                            className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 text-gray-600\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <label htmlFor=\"quantity\" className=\"text-sm font-medium text-gray-600\">Quantity</label>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            id=\"quantity\"\r\n                                            name=\"quantity\"\r\n                                            value={modalForm.quantity}\r\n                                            onChange={handleModalFormChange}\r\n                                            min=\"1\"\r\n                                            className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <label htmlFor=\"sellPrice\" className=\"text-sm font-medium text-gray-600\">Sell Price (MRP)</label>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            id=\"sellPrice\"\r\n                                            name=\"sellPrice\"\r\n                                            value={modalForm.sellPrice}\r\n                                            onChange={handleModalFormChange}\r\n                                            min=\"0\"\r\n                                            className=\"w-full bg-gray-100 p-3 mt-1 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={handleAddToBill}\r\n                                className=\"w-full mt-8 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:bg-green-700 transition-colors disabled:bg-gray-400\"\r\n                                disabled={!modalForm.medicineId || !modalForm.quantity || !modalForm.sellPrice}\r\n                            >\r\n                                Add to Bill\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </Modal>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}