{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Desktop\\\\frontend\\\\src\\\\components\\\\Admin\\\\StockEntry\\\\AddStock.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\"; // Import useRef\nimport axios from \"axios\";\nimport AddMedicineModal from \"./AddMedicineModal\";\n// Add UploadCloud and AlertTriangle icons\nimport { PlusCircle, Trash2, Loader2, PackagePlus, UploadCloud, AlertTriangle } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BASE_URL = \"http://localhost:4000\";\nconst token = localStorage.getItem(\"lalitkumar_choudhary\") || \"\";\nfunction StockEntryResponsive() {\n  _s();\n  const [wholesaler, setWholesaler] = useState(\"\");\n  const [invoiceNumber, setInvoiceNumber] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [medicines, setMedicines] = useState([]);\n  const [showAddMedicineModal, setShowAddMedicineModal] = useState(false);\n  const [loading, setLoading] = useState(false); // For final form submission\n  const [isProcessing, setIsProcessing] = useState(false); // For AI processing\n  const [message, setMessage] = useState(null);\n  const [error, setError] = useState(null);\n  const fileInputRef = useRef(null); // Ref for the hidden file input\n\n  // --- HANDLERS ---\n  const handleAddMedicine = medicine => setMedicines(prev => [...prev, medicine]);\n  const handleDeleteMedicine = idx => setMedicines(prev => prev.filter((_, i) => i !== idx));\n  const clearForm = () => {/* ... (no changes) ... */};\n\n  // --- NEW: Handler for processing the uploaded invoice ---\n  const handleFileProcess = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    setIsProcessing(true);\n    setError(null);\n    setMessage(null);\n    const formData = new FormData();\n    formData.append(\"invoice\", file); // Key 'invoice' must match backend (upload.single('invoice'))\n\n    try {\n      const res = await axios.post(`${BASE_URL}/admin/api/process-invoice`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n          // You might need Authorization here depending on your backend setup\n          // Authorization: `Bearer ${token}`,\n        }\n      });\n      const data = res.data;\n      // Auto-fill the form with data from Gemini\n      setWholesaler(data.wholesaler || \"\");\n      setInvoiceNumber(data.invoiceNumber || \"\");\n      setDate(data.date || \"\");\n      setMedicines(data.medicines || []);\n      setMessage(\"Invoice processed! Please review the auto-filled details before submitting.\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to process the invoice file. Please try a clearer image/PDF.\");\n    } finally {\n      setIsProcessing(false);\n      // Clear the file input value so the same file can be selected again\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\";\n      }\n    }\n  };\n  const handleSubmit = async e => {/* ... (no changes) ... */};\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-slate-100 p-4 sm:p-6 lg:p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-auto max-w-7xl\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 gap-8 lg:grid-cols-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sticky p-6 bg-white rounded-lg shadow-md top-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 mb-6 border-2 border-dashed rounded-lg border-indigo-200 bg-indigo-50\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-bold text-slate-800\",\n                  children: \"Auto-fill with AI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mb-3 text-sm text-slate-600\",\n                  children: \"Upload an invoice (PDF/JPG/PNG) to let AI fill the form for you.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  ref: fileInputRef,\n                  className: \"hidden\",\n                  accept: \".pdf,.jpg,.jpeg,.png\",\n                  onChange: handleFileProcess,\n                  disabled: isProcessing\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => fileInputRef.current.click(),\n                  disabled: isProcessing,\n                  className: \"flex items-center justify-center w-full px-4 py-2 font-semibold text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-indigo-300\",\n                  children: isProcessing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-5 h-5 mr-2 animate-spin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 99,\n                      columnNumber: 25\n                    }, this), \"Analyzing Invoice...\"]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(UploadCloud, {\n                      className: \"w-5 h-5 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 104,\n                      columnNumber: 25\n                    }, this), \"Upload Invoice\"]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"mb-6 text-2xl font-bold text-slate-800\",\n                children: \"Stock Entry Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleSubmit,\n                className: \"space-y-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"wholesaler\",\n                    className: \"block mb-1 text-sm font-medium text-slate-600\",\n                    children: [\"Wholesaler \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-red-500\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 118,\n                      columnNumber: 34\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: \"wholesaler\",\n                    type: \"text\",\n                    className: \"w-full px-3 py-2 border rounded-md border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\",\n                    value: wholesaler,\n                    onChange: e => setWholesaler(e.target.value),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 20\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"invoiceNumber\",\n                    className: \"block mb-1 text-sm font-medium text-slate-600\",\n                    children: [\"Invoice No \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-red-500\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 34\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: \"invoiceNumber\",\n                    type: \"text\",\n                    className: \"w-full px-3 py-2 border rounded-md border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\",\n                    value: invoiceNumber,\n                    onChange: e => setInvoiceNumber(e.target.value),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"date\",\n                    className: \"block mb-1 text-sm font-medium text-slate-600\",\n                    children: [\"Date \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-red-500\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 130,\n                      columnNumber: 28\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: \"date\",\n                    type: \"date\",\n                    className: \"w-full px-3 py-2 border rounded-md border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\",\n                    value: date,\n                    onChange: e => setDate(e.target.value),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pt-4 space-y-3\",\n                  children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-3 text-sm text-red-800 bg-red-100 rounded-lg\",\n                    role: \"alert\",\n                    children: error\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 23\n                  }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-3 text-sm text-green-800 bg-green-100 rounded-lg\",\n                    role: \"alert\",\n                    children: message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 20\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col gap-3 pt-6 sm:flex-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"flex items-center justify-center w-full px-6 py-2.5 font-semibold text-white bg-indigo-600 rounded-md shadow-sm sm:w-auto hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-indigo-300\",\n                    disabled: loading || isProcessing // Also disable while AI is working\n                    ,\n                    children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [\" \", /*#__PURE__*/_jsxDEV(Loader2, {\n                        className: \"w-5 h-5 mr-2 animate-spin\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 158,\n                        columnNumber: 28\n                      }, this), \" Submitting... \"]\n                    }, void 0, true) : \"Submit Entry\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: clearForm,\n                    className: \"w-full px-6 py-2.5 font-semibold text-slate-700 bg-slate-200 rounded-md sm:w-auto hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-50\",\n                    disabled: loading || isProcessing,\n                    children: \"Cancel\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), showAddMedicineModal && /*#__PURE__*/_jsxDEV(AddMedicineModal, {\n      onClose: () => setShowAddMedicineModal(false),\n      onAddMedicine: handleAddMedicine\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 34\n    }, this)]\n  }, void 0, true);\n}\n_s(StockEntryResponsive, \"5BsmV2XCL9DJvFpQjBowdXtd/cs=\");\n_c = StockEntryResponsive;\nexport default StockEntryResponsive;\nvar _c;\n$RefreshReg$(_c, \"StockEntryResponsive\");","map":{"version":3,"names":["React","useState","useRef","axios","AddMedicineModal","PlusCircle","Trash2","Loader2","PackagePlus","UploadCloud","AlertTriangle","jsxDEV","_jsxDEV","Fragment","_Fragment","BASE_URL","token","localStorage","getItem","StockEntryResponsive","_s","wholesaler","setWholesaler","invoiceNumber","setInvoiceNumber","date","setDate","medicines","setMedicines","showAddMedicineModal","setShowAddMedicineModal","loading","setLoading","isProcessing","setIsProcessing","message","setMessage","error","setError","fileInputRef","handleAddMedicine","medicine","prev","handleDeleteMedicine","idx","filter","_","i","clearForm","handleFileProcess","event","file","target","files","formData","FormData","append","res","post","headers","data","err","_err$response","_err$response$data","response","current","value","handleSubmit","e","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","ref","accept","onChange","disabled","onClick","click","onSubmit","htmlFor","id","required","role","onClose","onAddMedicine","_c","$RefreshReg$"],"sources":["C:/Users/hp/OneDrive/Desktop/frontend/src/components/Admin/StockEntry/AddStock.js"],"sourcesContent":["import React, { useState, useRef } from \"react\"; // Import useRef\r\nimport axios from \"axios\";\r\nimport AddMedicineModal from \"./AddMedicineModal\";\r\n// Add UploadCloud and AlertTriangle icons\r\nimport { PlusCircle, Trash2, Loader2, PackagePlus, UploadCloud, AlertTriangle } from \"lucide-react\";\r\n\r\nconst BASE_URL = \"http://localhost:4000\";\r\nconst token = localStorage.getItem(\"lalitkumar_choudhary\") || \"\";\r\n\r\nfunction StockEntryResponsive() {\r\n  const [wholesaler, setWholesaler] = useState(\"\");\r\n  const [invoiceNumber, setInvoiceNumber] = useState(\"\");\r\n  const [date, setDate] = useState(\"\");\r\n  const [medicines, setMedicines] = useState([]);\r\n  const [showAddMedicineModal, setShowAddMedicineModal] = useState(false);\r\n  const [loading, setLoading] = useState(false); // For final form submission\r\n  const [isProcessing, setIsProcessing] = useState(false); // For AI processing\r\n  const [message, setMessage] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const fileInputRef = useRef(null); // Ref for the hidden file input\r\n\r\n  // --- HANDLERS ---\r\n  const handleAddMedicine = (medicine) => setMedicines((prev) => [...prev, medicine]);\r\n  const handleDeleteMedicine = (idx) => setMedicines((prev) => prev.filter((_, i) => i !== idx));\r\n  const clearForm = () => { /* ... (no changes) ... */ };\r\n  \r\n  // --- NEW: Handler for processing the uploaded invoice ---\r\n  const handleFileProcess = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    setIsProcessing(true);\r\n    setError(null);\r\n    setMessage(null);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"invoice\", file); // Key 'invoice' must match backend (upload.single('invoice'))\r\n\r\n    try {\r\n      const res = await axios.post(`${BASE_URL}/admin/api/process-invoice`, formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          // You might need Authorization here depending on your backend setup\r\n          // Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      const data = res.data;\r\n      // Auto-fill the form with data from Gemini\r\n      setWholesaler(data.wholesaler || \"\");\r\n      setInvoiceNumber(data.invoiceNumber || \"\");\r\n      setDate(data.date || \"\");\r\n      setMedicines(data.medicines || []);\r\n\r\n      setMessage(\"Invoice processed! Please review the auto-filled details before submitting.\");\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Failed to process the invoice file. Please try a clearer image/PDF.\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n      // Clear the file input value so the same file can be selected again\r\n      if(fileInputRef.current) {\r\n        fileInputRef.current.value = \"\";\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  const handleSubmit = async (e) => { /* ... (no changes) ... */ };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"min-h-screen bg-slate-100 p-4 sm:p-6 lg:p-8\">\r\n        <div className=\"mx-auto max-w-7xl\">\r\n          <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-5\">\r\n            {/* --- LEFT COLUMN: FORM DETAILS --- */}\r\n            <div className=\"lg:col-span-2\">\r\n              <div className=\"sticky p-6 bg-white rounded-lg shadow-md top-8\">\r\n                \r\n                {/* --- NEW: AUTO-FILL SECTION --- */}\r\n                <div className=\"p-4 mb-6 border-2 border-dashed rounded-lg border-indigo-200 bg-indigo-50\">\r\n                  <h3 className=\"text-lg font-bold text-slate-800\">Auto-fill with AI</h3>\r\n                  <p className=\"mb-3 text-sm text-slate-600\">Upload an invoice (PDF/JPG/PNG) to let AI fill the form for you.</p>\r\n                  <input\r\n                    type=\"file\"\r\n                    ref={fileInputRef}\r\n                    className=\"hidden\"\r\n                    accept=\".pdf,.jpg,.jpeg,.png\"\r\n                    onChange={handleFileProcess}\r\n                    disabled={isProcessing}\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => fileInputRef.current.click()}\r\n                    disabled={isProcessing}\r\n                    className=\"flex items-center justify-center w-full px-4 py-2 font-semibold text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-indigo-300\"\r\n                  >\r\n                    {isProcessing ? (\r\n                      <>\r\n                        <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />\r\n                        Analyzing Invoice...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <UploadCloud className=\"w-5 h-5 mr-2\" />\r\n                        Upload Invoice\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n                \r\n                <h2 className=\"mb-6 text-2xl font-bold text-slate-800\">\r\n                  Stock Entry Details\r\n                </h2>\r\n                <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n                  {/* ... (Your form inputs for Wholesaler, Invoice, Date remain the same) ... */}\r\n                   <div>\r\n                    <label htmlFor=\"wholesaler\" className=\"block mb-1 text-sm font-medium text-slate-600\">\r\n                      Wholesaler <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input id=\"wholesaler\" type=\"text\" className=\"w-full px-3 py-2 border rounded-md border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\" value={wholesaler} onChange={(e) => setWholesaler(e.target.value)} required />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"invoiceNumber\" className=\"block mb-1 text-sm font-medium text-slate-600\">\r\n                      Invoice No <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input id=\"invoiceNumber\" type=\"text\" className=\"w-full px-3 py-2 border rounded-md border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\" value={invoiceNumber} onChange={(e) => setInvoiceNumber(e.target.value)} required />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"date\" className=\"block mb-1 text-sm font-medium text-slate-600\">\r\n                      Date <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input id=\"date\" type=\"date\" className=\"w-full px-3 py-2 border rounded-md border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\" value={date} onChange={(e) => setDate(e.target.value)} required />\r\n                  </div>\r\n\r\n\r\n                  {/* --- MESSAGES --- */}\r\n                   <div className=\"pt-4 space-y-3\">\r\n                    {error && (\r\n                      <div className=\"p-3 text-sm text-red-800 bg-red-100 rounded-lg\" role=\"alert\">\r\n                        {error}\r\n                      </div>\r\n                    )}\r\n                    {message && (\r\n                      <div className=\"p-3 text-sm text-green-800 bg-green-100 rounded-lg\" role=\"alert\">\r\n                        {message}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* --- ACTION BUTTONS --- */}\r\n                  <div className=\"flex flex-col gap-3 pt-6 sm:flex-row\">\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"flex items-center justify-center w-full px-6 py-2.5 font-semibold text-white bg-indigo-600 rounded-md shadow-sm sm:w-auto hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-indigo-300\"\r\n                      disabled={loading || isProcessing} // Also disable while AI is working\r\n                    >\r\n                      {loading ? (\r\n                        <> <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" /> Submitting... </>\r\n                      ) : ( \"Submit Entry\" )}\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={clearForm}\r\n                      className=\"w-full px-6 py-2.5 font-semibold text-slate-700 bg-slate-200 rounded-md sm:w-auto hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-50\"\r\n                      disabled={loading || isProcessing}\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n\r\n            {/* --- RIGHT COLUMN: MEDICINE LIST (no changes here) --- */}\r\n            {/* ... */}\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {showAddMedicineModal && ( <AddMedicineModal onClose={() => setShowAddMedicineModal(false)} onAddMedicine={handleAddMedicine} /> )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default StockEntryResponsive;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}